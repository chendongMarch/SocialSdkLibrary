
# SocialSDK

![](http://cdn1.showjoy.com/shop/images/20180828/MLI1YQGFQLZBRO3VKH6U1535432744013.png)

> æœ€æ–°ç‰ˆæœ¬(0.1.1)   Easier ã€Lighter ã€ More Business-Oriented

ä»¥æ›´ç®€å•ã€æ›´è½»é‡ã€æ›´åŠ é¢å‘ä¸šåŠ¡éœ€æ±‚ä¸ºè®¾è®¡ç›®æ ‡ï¼Œæä¾› **å¾®åš**ã€**å¾®ä¿¡**ã€**QQ**ã€**Tim**ã€**QQ è½»èŠç‰ˆ**ã€**é’‰é’‰** çš„ç™»é™†åˆ†äº«åŠŸèƒ½æ”¯æŒï¼›

é¡¹ç›®åœ°å€ : [GitHub - SocialSdkLibrary](https://github.com/chendongMarch/SocialSdkLibrary)

åšå®¢åœ°å€ ï¼š[å¿«é€Ÿæ¥å…¥å¾®ä¿¡å¾®åšQQé’‰é’‰åŸç”Ÿç™»å½•åˆ†äº«](http://zfyx.coding.me/article/3067853428/)

<div style="width:100%;display: flex;align-items:center;height:40px;margin-bottom:20px;">

<img  style="margin-right:20px;height:20px"  src="https://img.shields.io/circleci/project/github/badges/shields/master.svg"/>

<img  style="margin-right:20px;height:20px"  src="https://img.shields.io/badge/version-0.1.1-blue.svg?maxAge=2592000"/>

<img style="margin-right:20px;height:20px"  src="https://img.shields.io/github/stars/chendongMarch/SocialSdkLibrary.svg"/>

<img  style="margin-right:20px;height:20px"  src="https://img.shields.io/github/forks/chendongMarch/SocialSdkLibrary.svg"/>

<img style="margin-right:20px;height:20px" src="https://badge.juejin.im/entry/5a793a405188257a82111092/likes.svg?style=flat-square"/>

</div>

<br/>

ğŸ‰  2019.3.28 ä½¿ç”¨ `gradle plugin` è‡ªåŠ¨ç®¡ç†ä¾èµ–ï¼Œé‡æ–°è®¾è®¡ç‰ˆæœ¬å· [ç¨³å®šç‰ˆæœ¬ 0.1.1](https://github.com/chendongMarch/SocialSdkLibrary/releases/tag/0.1.1) â¤ï¸

ğŸ‰  2018.12.27 å®Œæˆ `gradle` æ’ä»¶ï¼Œæ‹†åˆ†å¹³å°ï¼Œè‡ªåŠ¨åŒ–ä¾èµ–ï¼Œä¸€ä¸ªæ–°å°é˜¶ ğŸ¶

ğŸ‰  2018.12.21 å·²ç»225é¢— ğŸŒŸï¼Œç€æ‰‹å‡†å¤‡æ‹†åˆ†æˆä¸åŒå¹³å°åº“ï¼Œæ–¹ä¾¿çµæ´»æ¥å…¥ â›½ï¸

ğŸ‰  2018.9.26 é¡¹ç›®è·å¾—äº†ç¬¬202é¢— ğŸŒŸï¼Œæ„Ÿè°¢æ–°åŒäº‹è¡¥æ˜Ÿ 2 ä¸ª ğŸ˜„

ğŸ‰  2018.6.7 é¡¹ç›®è·å¾—äº†ç¬¬100é¢— ğŸŒŸï¼Œæœ€åä¸€é¢—æ˜¯æˆ‘é—®åŒäº‹è¦çš„ ğŸ¤¦â€

ğŸ‰  2018.5.12 ä¿®å¤å†…å­˜é—®é¢˜ã€åŠŸèƒ½æ‰©å±• [ç¨³å®šç‰ˆæœ¬ 1.1.0](https://github.com/chendongMarch/SocialSdkLibrary/releases/tag/1.1.0) â¤ï¸

ğŸ‰  2018.2.12 æ”¯æŒé’‰é’‰åˆ†äº« ğŸ†•

ğŸ‰  2017.12.12 å¯¹ä»£ç è¿›è¡Œç®€å•é‡æ„å¹¶æµ‹è¯•  [ç¨³å®šç‰ˆæœ¬ 1.0.0](https://github.com/chendongMarch/SocialSdkLibrary/releases/tag/1.0.0) â¤ï¸


<!--more-->

## ä¼˜åŠ¿

ğŸ”¥ å¼€æºï¼šæ²¡æœ‰å½©è›‹ï¼Œæ²¡æœ‰å½©è›‹ï¼Œæ²¡æœ‰å½©è›‹ï¼›

ğŸ”¥ ç®€å•ï¼šåªéœ€è¦å…³æ³¨ç™»å½•ã€åˆ†äº«ç®¡ç†ç±»å’Œä¸€ä¸ªæ•°æ®ç»“æ„å¯¹è±¡å³å¯ï¼Œä¸éœ€è¦å†å…³æ³¨å¹³å°ä¹‹é—´çš„å·®å¼‚ï¼›

ğŸ”¥ è½»é‡ï¼šä»…åŒ…å«ä¸‰æ–¹ `SDK` å’Œä¸€ä¸ªç®€å•çš„å¼‚æ­¥æ¡†æ¶(38k)ï¼Œç½‘ç»œè¯·æ±‚ã€`JSON` è§£æä»å¤–éƒ¨æ³¨å…¥ï¼Œå‡å°‘å¤šä½™çš„ä¾èµ–ï¼Œä¿è¯ä¸å®¿ä¸»é¡¹ç›®é«˜åº¦ç»Ÿä¸€ï¼›

ğŸ”¥ é¢å‘éœ€æ±‚è®¾è®¡ï¼š

- Qï¼šå¾®ä¿¡ç™»å½•æœ¬åœ°åªè·å– `code`ï¼ŒæœåŠ¡ç«¯è·å– `token`ï¼Ÿ
	- Aï¼šé…ç½® `wxOnlyAuthCode` å‚æ•°;
- Qï¼šåˆæœ‰æ–°å¹³å°ï¼Ÿåä¸ºã€OV è”è¿ï¼Ÿ
    - Aï¼šæ”¯æŒæ‰©å±•æ–°å¹³å°å®ç°ï¼Œä¾‹å¦‚åä¸ºè”è¿ç™»å½•æ¥å…¥ç­‰ï¼›
- Qï¼šæ¯ä¸ªå¹³å°æ”¯æŒçš„ç±»å‹ä¸ä¸€è‡´ï¼Œä½ æ”¯æŒéŸ³ä¹ï¼Œæˆ‘æ”¯æŒè§†é¢‘ï¼Œæ¥å…¥è¿ç§»å›°éš¾ï¼Ÿ
    - Aï¼šå°è£…å„å¹³å°å†…éƒ¨å®ç°ï¼Œå¯¹å¤–æš´éœ²ç»Ÿä¸€çš„æ¥å£ï¼Œè‹¥ä¸æ”¯æŒï¼Œä½¿ç”¨ `web` åˆ†äº«å…¼å®¹ï¼›
- Qï¼šæœ¬åœ°è§†é¢‘æ— æ³•åˆ†äº«ï¼ŸQQ ä¸æ”¯æŒçº¯æ–‡å­—åˆ†äº«ï¼Ÿéœ€è¦å…¼å®¹æ–¹æ¡ˆï¼Ÿ
    - Aï¼šæ— æ³•æ”¯æŒçš„æ•°æ®ç±»å‹ï¼Œä½¿ç”¨ `Intent` å”¤é†’åˆ†äº«ï¼Œå¦‚æ”¯æŒæœ¬åœ°è§†é¢‘åˆ†äº«ï¼Œ`qq` çš„çº¯æ–‡å­—åˆ†äº«ç­‰ç­‰ï¼›
- Qï¼šç½‘ç»œå›¾ç‰‡è¿˜å¾—å…ˆä¸‹è½½ï¼Ÿæ¯æ¬¡åˆ†äº«å‰è¿˜éœ€è¦æ‰§è¡Œä¸‹è½½é€»è¾‘ï¼Ÿ
    - Aï¼šæ”¯æŒç›´æ¥ä½¿ç”¨ç½‘ç»œå›¾ç‰‡åˆ†äº«ï¼Œå†…ç½®è‡ªåŠ¨ä¸‹è½½å’Œå›¾ç‰‡ç¼“å­˜åŠŸèƒ½ï¼›
- Qï¼šä¸‡ä¸€å›¾ç‰‡ä¸‹è½½ä¸ä¸‹æ¥æ€ä¹ˆåŠï¼Ÿåˆ†äº«ç›´æ¥å¤±è´¥ï¼Ÿ
    - Aï¼šå›¾ç‰‡ ä¸‹è½½/åŠ è½½ å¤±è´¥æ—¶é™çº§ä½¿ç”¨èµ„æºå›¾ï¼Œé¿å…åˆ†äº«è¢«ä¸­æ–­ï¼›
- Qï¼šåˆ†äº«è¿‡ç¨‹ä¸­éœ€è¦å®Œæˆç»Ÿä¸€åˆ‡é¢æ“ä½œï¼Œæ‰“ç‚¹ï¼ŸåŠ æ°´å°ï¼Ÿè¿˜æœ‰å•¥ï¼Ÿ
    - Aï¼šåœ¨åˆ†äº«å‰å¯ç»Ÿä¸€é‡å†™æ•°æ®å¯¹è±¡ï¼Œç”¨æ¥åšåˆ†äº«çš„åˆ‡é¢ï¼Œæ”¯æŒå›¾ç‰‡åŠ æ°´å°ç­‰ç±»ä¼¼éœ€æ±‚ï¼›
- Qï¼šåˆ†äº«å¢åŠ äº†å¤åˆ¶é“¾æ¥åˆ°ç²˜è´´æ¿çš„ç±»å‹ï¼Œå•ç‹¬é‡æ–°å†™è¿™éƒ¨åˆ†é€»è¾‘ï¼Œé‚£ä¸æ˜¯ä¸ç»Ÿä¸€äº†ï¼Ÿ
    - Aï¼šæ”¯æŒçŸ­ä¿¡ã€é‚®ä»¶ã€ç²˜è´´æ¿ç­‰ç³»ç»Ÿåˆ†äº«å¹³å°ï¼›
- Qï¼šæ¯æ¬¡éƒ½éœ€è¦æ‰“å¼€ä¸‰æ–¹ App æˆæƒç™»å½•ï¼Œèƒ½ç›´æ¥ç™»å½•è¿›å»å—ï¼Ÿ
    - Aï¼šæŒä¹…åŒ–å­˜å‚¨ `token` é¿å…å¤šæ¬¡æˆæƒï¼Œå¯é€‰æ‹©æœ‰æ•ˆæ—¶é•¿ï¼›
- Qï¼šæˆ‘é‡åˆ°çš„è¿™äº›é—®é¢˜ï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°äº†ï¼Ÿ
    - Aï¼šè¯•è¯• `SocialSdk` å§ï¼›


## å¼€å§‹æ¥å…¥

**STEP1**: æ·»åŠ æ’ä»¶ä¾èµ–è·¯å¾„

> project / build.gradle

```js
buildscript {
    repositories {
        maven { url "https://dl.bintray.com/zfy/maven" }
    }
    dependencies {
        // è¯·æŸ¥çœ‹æ–‡åˆæœ€æ–°ç‰ˆæœ¬ï¼Œè¿™è¾¹å¯èƒ½å¿˜è®°æ›´æ–°ï¼ï¼ï¼
        classpath 'com.zfy.social:social-sdk-plugin:0.1.1'
    }
}

allprojects {
    repositories {
        maven { url "https://dl.bintray.com/zfy/maven" }
    }
}
```

**STEP2**: é…ç½®å‚æ•°ï¼Œæ³¨æ„ä¸ `android` åŒçº§

> project / local.properties

é…ç½®ä½ çš„ `appId` å’Œ `appKey`;

```
wxAppId = wx4b8xxxb195c3
wxAppSecret = 0a3cxxxxxx654f499171
wxOnlyAuthCode = false

qqAppId = 110xxx0200
qqAppSecret = A6Aqxxx9yQ4N


wbAppId = 2xxx5998
wbUrl = http://open.manfenmm.com/bxx/common.php

ddAppId = dingoxxxefwjeumuof
```

> app / build.gralde

```js
// å¼•ç”¨æ’ä»¶
apply plugin: 'socialsdk'

// android é…ç½®æ¨¡å—
android {
	...
}

// socialsdk é…ç½®æ¨¡å—
Properties prop = getLocalProperties()
socialsdk {
    wx {
        appId = prop.get('wxAppId')
        appSecret = prop.get('wxAppSecret')
        onlyAuthCode = Boolean.parseBoolean(prop.get('wxOnlyAuthCode'))
    }
    qq {
        appId = prop.get('qqAppId')
        appSecret = prop.get('qqAppSecret')
    }
    wb {
        appId = prop.get('wbAppId')
        url = prop.get('wbUrl')
    }
    dd {
        appId = prop.get('ddAppId')
    }
}
```

**STEP3**ï¼šåˆå§‹åŒ–

```java
SocialOptions options = new SocialOptions.Builder(this)
        // è°ƒè¯•æ¨¡å¼ï¼Œå¼€å¯ log è¾“å‡º
        .debug(true)
        // åŠ è½½ç¼©ç•¥å›¾å¤±è´¥æ—¶ï¼Œé™çº§ä½¿ç”¨èµ„æºå›¾
        .failImgRes(R.mipmap.ic_launcher_new)
        // token ä¿ç•™æ—¶é—´ï¼Œä½†æ˜¯å°æ—¶ï¼Œé»˜è®¤ä¸ä¿ç•™
        .tokenExpiresHours(24)
        // åˆ†äº«å¦‚æœåœç•™åœ¨ç¬¬ä¸‰æ”¾å°†ä¼šè¿”å›æˆåŠŸï¼Œé»˜è®¤è¿”å›å¤±è´¥
        .shareSuccessIfStay(true)
        // å¾®åš loading çª—é¢œè‰²
        .wbProgressColor(Color.YELLOW)
        // æ·»åŠ è‡ªå®šä¹‰çš„ json è§£æ
        .jsonAdapter(new GsonJsonAdapter())
        // è¯·æ±‚å¤„ç†ç±»ï¼Œå¦‚æœä½¿ç”¨äº†å¾®åšçš„ openApi åˆ†äº«ï¼Œè¿™ä¸ªæ˜¯å¿…é¡»çš„
        .requestAdapter(new OkHttpRequestAdapter())
        // æ·»åŠ åˆ†äº«æ‹¦æˆªå™¨ï¼Œé‡æ–°å¤„ç†åˆ†äº«çš„æ•°æ®
        .addShareInterceptor((context, obj) -> {
            obj.setSummary("è¢«é‡æ–°ç»„è£…" + obj.getSummary());
            return obj;
        })
        // æ„å»º
        .build();
// åˆå§‹åŒ–
SocialSdk.init(options);
// æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰å¹³å°
SocialSdk.addPlatform(new HuaweiPlatform.Factory());
```

è¯´ä¸€ä¸‹ `Adapter`ï¼Œé¡¹ç›®å†…ä½¿ç”¨äº† `JSON` è§£æï¼Œç½‘ç»œè¯·æ±‚ç­‰åŠŸèƒ½ï¼Œä½†æ˜¯åˆä¸æƒ³å¼•å…¥å¤šä½™çš„æ¡†æ¶ï¼Œæ‰€ä»¥æ‰ç”¨äº†å®¿ä¸»é¡¹ç›®æ³¨å…¥çš„æ–¹å¼ï¼Œä¿è¯å’Œå®¿ä¸»é¡¹ç›®ç»Ÿä¸€ã€‚

- `IJsonAdapter`ï¼Œå¿…é¡» ï¼è´Ÿè´£å®Œæˆ `Json` è§£æå’Œåºåˆ—åŒ–ï¼Œæä¾›ä¸€ä¸ª `Gson` ä¸‹çš„å®ç°ä»…ä¾›å‚è€ƒ - [GsonJsonAdapter.java](https://github.com/chendongMarch/SocialSdkLibrary/blob/master/temp/GsonJsonAdapter.java)ï¼›

- `IRequestAdapter`ï¼Œéå¿…é¡»ï¼å†…éƒ¨ä½¿ç”¨ `UrlConnection` åšäº†ä¸€ä¸ªé»˜è®¤çš„å®ç°ï¼Œè´Ÿè´£å®Œæˆç½‘ç»œè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `OkHttp` é‡æ–°å®ç°ï¼Œå¯ä»¥å‚è€ƒ - [OkHttpRequestAdapter.java](https://github.com/chendongMarch/SocialSdkLibrary/blob/b0b8559ff26136abbaaee9667bfc5c2bf54eedea/temp/OkHttpRequestAdapter.java)ï¼Œç›®å‰å¾®ä¿¡çš„ `OAuth2` æˆæƒå’Œå›¾ç‰‡ä¸‹è½½çš„ç›¸å…³è¯·æ±‚éƒ½æ˜¯ä½¿ç”¨ `IRequestAdapter` ä»£ç†ï¼›

## ç™»å½•åŠŸèƒ½

ç™»é™†åŠŸèƒ½æ”¯æŒä¸‰ä¸ªå¹³å°ï¼Œqqï¼Œå¾®ä¿¡ï¼Œå¾®åšï¼›

```java
// 3ä¸ªå¹³å°
Target.LOGIN_QQ;
Target.LOGIN_WX;
Target.LOGIN_WB;
```

ç™»å½•å°†ä¼šè¿”å› `LoginResult`ï¼Œ å…¶ä¸­ä¸»è¦åŒ…æ‹¬ç™»å½•ç±»å‹ï¼ŒåŸºæœ¬ç”¨æˆ·ä¿¡æ¯ï¼Œä»¤ç‰Œä¿¡æ¯ 3 éƒ¨åˆ†ï¼›

```java
LoginResult {
    // çŠ¶æ€ï¼ŒæˆåŠŸï¼Œå¤±è´¥ï¼Œå–æ¶ˆç­‰
    public int state;
    // ç›®æ ‡å¹³å°
    public int target;
    // å‘ç”Ÿé”™è¯¯æ—¶ä½¿ç”¨
    public SocialError error;
    // é’ˆå¯¹ç™»å½•ç±»å‹å¯å¼ºè½¬ä¸º WbUser,WxUser,QQUser æ¥è·å–æ›´åŠ ä¸°å¯Œçš„ä¿¡æ¯
    public SocialUser socialUser;
    // æœ¬æ¬¡ç™»é™†çš„ token ä¿¡æ¯ï¼ŒopenId, unionId,token,expires_in
    public AccessToken accessToken;
    // æˆæƒç ï¼Œå¦‚æœ onlyAuthCode ä¸º true, å°†ä¼šè¿”å›å®ƒ
    public String wxAuthCode;
}
```
ç™»å½•æ—¶éœ€è¦è®¾ç½®ç™»å½•å›è°ƒï¼š

```java
new OnLoginStateListener() {
    @Override
    public void onState(LoginResult result) {
        switch (result.state) {
            case LoginResult.STATE_SUCCESS:
                // ç™»å½•æˆåŠŸ
                break;
            case LoginResult.STATE_FAIL:
                // ç™»å½•å¤±è´¥
                break;
            case LoginResult.STATE_CANCEL:
                // ç™»å½•å–æ¶ˆ
                break;
        }
    }
};
```

è·å–æ›´å¤šç”¨æˆ·ä¿¡æ¯ï¼š

```java
SocialUser socialUser = loginResult.socialUser;
// åŸºæœ¬ä¿¡æ¯å¯ä»¥ä» SocialUser åœ¨è·å–åˆ°
String userNickName = socialUser.getUserNickName();
// è·å– openId
String openId = socialUser.getOpenId();
// å¾®ä¿¡è·å– unionIdï¼Œå…¶ä»–å¹³å°ä»æ—§è¿”å› openId
String unionId = socialUser.getUnionId();
// è·å– userIdï¼Œå¾®ä¿¡è¿”å› unionId, å…¶ä»–å¹³å°è¿”å› openId
String userId = socialUser.getUserId();
// å¼ºè½¬ä¸ºå¹³å°ç”¨æˆ·ï¼Œå¯ä»¥æ‹¿åˆ°æ›´å¤šä¿¡æ¯
int target = result.getTarget();
switch (target) {
    case Target.LOGIN_QQ:
        QQUser qqUser = (QQUser) socialUser;
        break;
    case Target.LOGIN_WB:
        WbUser wbUser = (WbUser) socialUser;
        break;
    case Target.LOGIN_WX:
        WxUser wxUser = (WxUser) socialUser;
        break;
}
```

å‘èµ·ç™»å½•ï¼š

```java
LoginManager.login(mActivity, Target.LOGIN_QQ, listener);
```

å…³äº `token` æ—¶æ•ˆï¼Œå¯ä»¥åœ¨åˆå§‹åŒ–æ—¶è®¾ç½® `tokenExpiresHours` æ¥æ§åˆ¶ï¼Œä¹ŸåŒæ ·æä¾›æ¸…é™¤æˆæƒ `token` çš„æ–¹æ³•ã€‚


```java
// æ¸…é™¤å…¨éƒ¨å¹³å°çš„ token
LoginManager.clearAllToken(context);
// æ¸…é™¤æŒ‡å®šå¹³å°çš„ token
LoginManager.clearToken(context, Target.LOGIN_QQ);
```

## åˆ†äº«åŠŸèƒ½


é‡è¦ï¼šè¯·ä»”ç»†æŸ¥çœ‹å¹³å°å’Œæ•°æ®ç±»å‹ä¸­é—´çš„æ”¯æŒèƒ½åŠ›

![](http://cdn1.showjoy.com/images/b9/b9ffca33435c40d8b6e33914db0fa6da.png)

å½“ å¾®åš ä½¿ç”¨ `openApi` å½¢å¼å»åˆ†äº«æ—¶ï¼Œå¯èƒ½æœ‰è¾ƒé•¿çš„å»¶æ—¶ï¼Œå»ºè®®åœ¨ç”Ÿå‘½å‘¨æœŸä¸­å¢åŠ è¿›åº¦æ¡æ˜¾ç¤ºï¼Œé¿å…ç”¨æˆ·ç­‰å¾…å¾ˆä¹…æ²¡æœ‰å“åº”ã€‚


### åˆ’åˆ†åˆ†äº«æ•°æ®ç±»å‹

é’ˆå¯¹ä¸šåŠ¡é€»è¾‘å’Œ `SDK` è®¾è®¡ï¼Œå°†åˆ†äº«æ•°æ®ç±»å‹åˆ’åˆ†ä¸º 7 ç§ç±»å‹ï¼Œä»–ä»¬èƒ½æ¶µç›–å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ï¼Œåˆ†åˆ«æ˜¯ï¼š

```bash
å¼€å¯ App ç±»å‹ï¼Œæ‰“å¼€æ¸ é“åº”ç”¨ï¼›
æ–‡å­—ç±»å‹ï¼Œçº¯æ–‡æœ¬åˆ†äº«ï¼›
å›¾ç‰‡ç±»å‹(jpg, png, gif(è¦æ±‚èƒ½åŠ¨))ï¼›
App æ¨å¹¿ç±»å‹ï¼›
ç½‘é¡µé“¾æ¥ç±»å‹ï¼›
éŸ³é¢‘åˆ†äº«ç±»å‹ï¼›
è§†é¢‘åˆ†äº«ç±»å‹ï¼›
```

ä¸ºäº†ä¿è¯æ¯ä¸ªå¹³å°éƒ½æœ‰å°é—­ä¸”ç»Ÿä¸€çš„å¤–è§‚ï¼Œå¦‚æœæŸä¸ªå¹³å°ä¸å…¼å®¹æŸç§ç±»å‹çš„åˆ†äº«ï¼Œå°†ä¼šä½¿ç”¨ `web` åˆ†äº«çš„æ–¹å¼ä»£æ›¿ï¼›æ¯”å¦‚å¾®ä¿¡ä¸æ”¯æŒ `app` åˆ†äº«ï¼Œåˆ†äº«å‡ºå»ä¹‹åæ—¶ `web` åˆ†äº«çš„æ¨¡å¼ã€‚

### åˆ’åˆ†åˆ†äº«æ¸ é“

```java
// æ”¯æŒçš„åˆ†äº«æ¸ é“
Target.SHARE_DD; // é’‰é’‰å¥½å‹
Target.SHARE_QQ_FRIENDS; // qqå¥½å‹
Target.SHARE_QQ_ZONE; // qqç©ºé—´
Target.SHARE_WX_FRIENDS; // å¾®ä¿¡å¥½å‹
Target.SHARE_WX_ZONE; // å¾®ä¿¡æœ‹å‹åœˆ
Target.SHARE_WX_FAVORITE; // å¾®ä¿¡æ”¶è—
Target.SHARE_WB; // æ–°æµªå¾®åš
Target.SHARE_SMS; // çŸ­ä¿¡åˆ†äº«
Target.SHARE_EMAIL; // é‚®ä»¶åˆ†äº«
Target.SHARE_CLIPBOARD; // ç²˜è´´æ¿åˆ†äº«
```

### åˆ›å»ºåˆ†äº«æ•°æ®

åˆ†äº«æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ„é€ åˆ†äº«ç”¨çš„æ•°æ®ï¼Œ`ShareObj` å¯¹è±¡æä¾›äº†å¤šç§é™æ€æ–¹æ³•ç”¨æ¥å¿«é€Ÿåˆ›å»ºå¯¹åº”åˆ†äº«çš„ç±»å‹çš„å¯¹è±¡;

```java
// æµ‹è¯•ç”¨çš„è·¯å¾„
localImagePath = new File(Environment.getExternalStorageDirectory(), "1.jpg").getAbsolutePath();
localVideoPath = new File(Environment.getExternalStorageDirectory(), "video.mp4").getAbsolutePath();
localGifPath = new File(Environment.getExternalStorageDirectory(), "3.gif").getAbsolutePath();
netVideoPath = "http://7xtjec.com1.z0.glb.clouddn.com/export.mp4";
netImagePath = "http://7xtjec.com1.z0.glb.clouddn.com/token.png";
netMusicPath = "http://7xtjec.com1.z0.glb.clouddn.com/test_music.mp3";
netMusicPath = "http://mp3.haoduoge.com/test/2017-05-19/1495207225.mp3";
targetUrl = "http://bbs.csdn.net/topics/391545021";


// æ‰“å¼€æ¸ é“å¯¹åº”app
ShareObj shareMediaObj = ShareObj.buildOpenAppObj();
// åˆ†äº«æ–‡å­—
ShareObj textObj = ShareObj.buildTextObj("åˆ†äº«æ–‡å­—", "summary");
// åˆ†äº«å›¾ç‰‡
ShareObj imageObj = ShareObj.buildImageObj("åˆ†äº«å›¾ç‰‡", "summary", localImagePath);
// åˆ†äº«gif
ShareObj imageGifObj = ShareObj.buildImageObj("åˆ†äº«å›¾ç‰‡", "summary", localGifPath);
// åˆ†äº«app
ShareObj appObj = ShareObj.buildAppObj("åˆ†äº«app", "summary", localImagePath, targetUrl);
// åˆ†äº«web
ShareObj webObj = ShareObj.buildWebObj("åˆ†äº«web", "summary", localImagePath, targetUrl);
// åˆ†äº«è§†é¢‘
ShareObj videoObj = ShareObj.buildVideoObj("åˆ†äº«è§†é¢‘", "summary", localImagePath, targetUrl, localVideoPath, 10);
// æœ¬åœ°è§†é¢‘åˆ†äº«ã€éƒ¨åˆ†å¹³å°æ”¯æŒ
ShareObj videoLocalObj = ShareObj.buildVideoObj("åˆ†äº«æœ¬åœ°è§†é¢‘", "summary", localImagePath, targetUrl, localVideoPath, 0);
// åˆ†äº«éŸ³ä¹
ShareObj musicObj = ShareObj.buildMusicObj("åˆ†äº«éŸ³ä¹", "summary", localImagePath, targetUrl, netMusicPath, 10);
```

é’ˆå¯¹ä¸€äº›ä¸èƒ½è¢«ç»Ÿä¸€çš„å‚æ•°ä½¿ç”¨æ‰©å±•çš„å‚æ•°æ”¯æŒï¼š

```java
// ä½¿ ShareObj æ”¯æŒçŸ­ä¿¡åˆ†äº«
webObj.setSmsParams("13611301719", "è¯´å•¥å‘¢");
// ä½¿ ShareObj æ”¯æŒç²˜è´´æ¿åˆ†äº«
webObj.setClipboardParams("å¤åˆ¶çš„å†…å®¹");
// ä½¿ ShareObj æ”¯æŒé‚®ä»¶åˆ†äº«
webObj.setEMailParams("1101873740@qq.com", "ä¸»é¢˜", "å†…å®¹");
// ä½¿ ShareObj åœ¨å¾®ä¿¡å¹³å°ä¼˜å…ˆä½¿ç”¨å°ç¨‹åºåˆ†äº«
webObj.setWxMiniParams("51299u9**q31",SocialValues.WX_MINI_TYPE_RELEASE,"/page/path");
```

### åˆ†äº«ç›‘å¬

ä½¿ç”¨ `OnShareStateListener ` ä½œä¸ºç›‘å¬åˆ†äº«å›è°ƒï¼›

```java
new OnShareStateListener() {
    @Override
    public void onState(ShareResult result) {
        switch (result.state) {
            case ShareResult.STATE_SUCCESS:
                showMsg("åˆ†äº«æˆåŠŸ");
                break;
            case ShareResult.STATE_FAIL:
                SocialError e = result.error;
                showMsg("åˆ†äº«å¤±è´¥  " + e.toString());
                // å¦‚ä¸‹å› ä¸ºæ²¡æœ‰å­˜å‚¨æƒé™å¯¼è‡´å¤±è´¥ï¼Œè¯·æ±‚æƒé™
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                    if (e.getCode() == SocialError.CODE_STORAGE_READ_ERROR) {
                        requestPermissions(new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, 100);
                    } else if (e.getCode() == SocialError.CODE_STORAGE_WRITE_ERROR) {
                        requestPermissions(new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 100);
                    }
                }
                break;
            case ShareResult.STATE_CANCEL:
                showMsg("åˆ†äº«å–æ¶ˆ");
                break;
        }
    }
};
```

### å‘èµ·åˆ†äº«

```java
// å”¤é†’åˆ†äº«
ShareManager.share(mActivity, Target.SHARE_QQ_FRIENDS, imageObj, mOnShareListener);
```

### é‡å†™åˆ†äº«å¯¹è±¡

å…³äºé‡å†™åˆ†äº«å¯¹è±¡ï¼Œå…¶å®æä¾›ä¸€ç§èƒ½åœ¨åˆ†äº«ä¹‹å‰å¯¹éœ€è¦åˆ†äº«çš„ `ShareObj` è¿›è¡Œç»Ÿä¸€å¤„ç†çš„æœºä¼šï¼Œç±»ä¼¼åˆ†äº«åŠŸèƒ½çš„ä¸€ä¸ªåˆ‡é¢ï¼Œæ¯”å¦‚å¦‚ä¸‹åœºæ™¯ï¼š

- è‡ªåŠ¨ä¸‹è½½ç½‘ç»œå›¾ç‰‡åˆ°æœ¬åœ°ï¼Œå†è¿›è¡Œåˆ†äº«ï¼Œæ”¯æŒç½‘ç»œå›¾åˆ†äº«ï¼ˆå·²å†…ç½®ï¼‰ï¼›
- å›¾ç‰‡åˆ†äº«å‡ºå»ä¹‹å‰éœ€è¦åŠ ä¸Š `app` æ°´å°ï¼›
- åˆ†äº«çš„ `url` å¸¦ä¸Šå…¬å…±å‚æ•° `shareId` ç­‰ï¼Œåœ¨ `H5` åšè®¿é—®ç»Ÿè®¡ï¼›

é‡å†™åˆ†äº«å¯¹è±¡ï¼Œæˆ‘ä»¬ä½¿ç”¨æ‹¦æˆªå™¨æ¥å®ç°ï¼Œæ‹¦æˆªå™¨åœ¨ `SDK` åˆå§‹åŒ–æ—¶æ³¨å…¥ï¼Œæ”¯æŒå¤šä¸ªï¼Œå¯ä»¥å°†ä¸åŒä¸šåŠ¡åˆ†ä¸ºä¸åŒçš„æ‹¦æˆªå™¨ï¼Œæ‰€æœ‰æ‹¦æˆªå™¨ä¼šè¢«é¡ºåºè°ƒç”¨ï¼›

âš ï¸ æ‹¦æˆªå™¨ä¼šåœ¨å­çº¿ç¨‹æ‰§è¡Œï¼Œä¹Ÿå°±æ„å‘³ç€ä½ å¯ä»¥åšè€—æ—¶æ“ä½œï¼ˆå›¾ç‰‡å¤„ç†ï¼Œç½‘ç»œè¯·æ±‚ï¼‰ï¼Œéœ€è¦æ›´æ”¹ `UI` éœ€è¦åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œï¼›


```java
SocialOptions options = new SocialOptions.Builder(this)
        // ... å…¶ä»–åˆå§‹åŒ–ä»£ç 
        // æ·»åŠ åˆ†äº«æ‹¦æˆªå™¨
        .addShareInterceptor((context, target, obj) -> {
            obj.setSummary("æè¿°åŠ å‰ç¼€" + obj.getSummary());
            return obj;
        })
        .addShareInterceptor((context, target, obj) -> {
            obj.setTargetUrl(obj.getTargetUrl()+"?id=100");
            return obj;
        })
        // æ„å»º
        .build();
// åˆå§‹åŒ–
SocialSdk.init(options);
```

### ç³»ç»Ÿå¹³å°

æˆ‘ä»¬åœ¨åšåˆ†äº«æ—¶é€šå¸¸ä¼šé‡åˆ°éœ€æ±‚ï¼Œå¤åˆ¶åˆ°ç²˜è´´æ¿/æ”¯æŒçŸ­ä¿¡åˆ†äº«/æ”¯æŒé‚®ä»¶åˆ†äº«ç­‰ç­‰ï¼Œ`SocialSdk` å†…ç½®äº†è¿™äº›åŠŸèƒ½ï¼Œéœ€è¦åœ¨åˆ›å»º `ShareObj` ä¹‹åæ·»åŠ é¢å¤–å‚æ•°æ¥å®ç°ï¼›

- çŸ­ä¿¡åˆ†äº«

```java
shareObj.setSmsParams("13611301719", "è¯´å•¥å‘¢");
```

- é‚®ä»¶åˆ†äº«

```java
shareObj.setEMailParams("1101873740@qq.com", "ä¸»é¢˜", "å†…å®¹");
```
- å¤åˆ¶é“¾æ¥

```java
shareObj.setClipboardParams("å¤åˆ¶çš„å†…å®¹");
```

### å¾®ä¿¡å°ç¨‹åºåˆ†äº«

æ”¯æŒå¾®ä¿¡å°ç¨‹åºåˆ†äº«ï¼Œä¹ŸåŒæ ·ä½¿ç”¨é¢å¤–å‚æ•°çš„å½¢å¼

```java
shareObj.setWxMiniParams("51299u9**q31",SocialValues.WX_MINI_TYPE_RELEASE,"/page/path");
```
## é”™è¯¯ç 

ä¸ºäº†æ›´å¥½çš„ç»Ÿä¸€åˆ†äº«å¤±è´¥æ—¶è¿”å›çš„å¼‚å¸¸ï¼Œè¿”å›çš„æ‰€æœ‰å¼‚å¸¸éƒ½ä¼šæœ‰ä¸€ä¸ª `code`ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„ `code` å®šä½é—®é¢˜å’Œç»™å‡ºæ›´å‹å¥½çš„æç¤ºã€‚


```java
int CODE_COMMON_ERROR = 101; // é€šç”¨é”™è¯¯ï¼Œæœªå½’ç±»
int CODE_NOT_INSTALL = 102; // æ²¡æœ‰å®‰è£…åº”ç”¨
int CODE_VERSION_LOW = 103; // ç‰ˆæœ¬è¿‡ä½ï¼Œä¸æ”¯æŒ
int CODE_SHARE_BY_INTENT_FAIL = 105; // ä½¿ç”¨ Intent åˆ†äº«å¤±è´¥
int CODE_STORAGE_READ_ERROR = 106; // æ²¡æœ‰è¯»å­˜å‚¨çš„æƒé™ï¼Œè·å–åˆ†äº«ç¼©ç•¥å›¾å°†ä¼šå¤±è´¥
int CODE_STORAGE_WRITE_ERROR = 107; // æ²¡æœ‰å†™å­˜å‚¨çš„æƒé™ï¼Œå¾®åšåˆ†äº«è§†é¢‘copyæ“ä½œå°†ä¼šå¤±è´¥
int CODE_FILE_NOT_FOUND = 108; // æ–‡ä»¶ä¸å­˜åœ¨
int CODE_SDK_ERROR = 109; // sdk è¿”å›é”™è¯¯
int CODE_REQUEST_ERROR = 110; // ç½‘ç»œè¯·æ±‚å‘ç”Ÿé”™è¯¯
int CODE_CANNOT_OPEN_ERROR = 111; // æ— æ³•å¯åŠ¨ app
int CODE_PARSE_ERROR = 112; // æ•°æ®è§£æé”™è¯¯
int CODE_IMAGE_COMPRESS_ERROR = 113; // å›¾ç‰‡å‹ç¼©å¤±è´¥
int CODE_PARAM_ERROR = 114; // å‚æ•°é”™è¯¯
int CODE_SDK_INIT_ERROR = 115; // SocialSdk åˆå§‹åŒ–é”™è¯¯
int CODE_PREPARE_BG_ERROR = 116; // æ‰§è¡Œ prepareOnBackground æ—¶é”™è¯¯
int CODE_NOT_SUPPORT = 117; // ä¸æ”¯æŒ
```

ä¾‹å¦‚ä½ å¯ä»¥è¿™ä¹ˆåšï¼š

```java
listener = new OnShareListener() {
	...
    @Override
    public void onFailure(SocialError e) {
        showMsg("åˆ†äº«å¤±è´¥  " + e.toString());
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
            if (e.getCode() == SocialError.CODE_STORAGE_READ_ERROR) {
                requestPermissions(new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, 100);
            } else if (e.getCode() == SocialError.CODE_STORAGE_WRITE_ERROR) {
                requestPermissions(new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 100);
            }
        }
    }
};
```

## æ‰©å±•æ–°çš„å¹³å°ï¼Ÿ

å‚è€ƒè¿™é‡Œ [HuaweiPlatform.java](https://github.com/chendongMarch/SocialSdkLibrary/blob/master/app/src/main/java/com/babypat/platform/HuaweiPlatform.java)

å‘ `SocialSdk` æ³¨å†Œæ„å»ºå·¥å‚ï¼š

```java
SocialSdk.addPlatform(new HuaweiPlatform.Factory());
```


## å…¶ä»–

- ç”Ÿå‘½å‘¨æœŸç»‘å®šé¿å…å†…å­˜æ³„æ¼

`SocialSdk` å†…éƒ¨å¯¹ç”Ÿå‘½å‘¨æœŸæœ‰è‡ªåŠ¨çš„ç®¡ç†ï¼Œæ¯æ¬¡ç™»å½•åˆ†äº«ç»“æŸäº†éƒ½ä¼šå›æ”¶æ‰æ‰€æœ‰çš„èµ„æºï¼›
å‘èµ·ç™»å½•åˆ†äº«çš„ `Activity` å»ºè®®å®ç° `LifecycleOwner` æ¥å£ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `AppCompatActivity`ï¼Œå†…éƒ¨ä¼šåšç”Ÿå‘½å‘¨æœŸçš„ç»‘å®šï¼Œé¿å…å†…å­˜æ³„æ¼çš„å‘ç”Ÿï¼›




## ç›¸å…³æ–‡æ¡£

QQï¼š

- `libs/open_sdk_r6019_lite.jar`
- [QQ ç™»å½•åˆ†äº«æ–‡æ¡£](http://wiki.open.qq.com/wiki/QQ%E7%94%A8%E6%88%B7%E8%83%BD%E5%8A%9B)
- [QQ SDK ä¸‹è½½](http://wiki.open.qq.com/wiki/mobile/SDK%E4%B8%8B%E8%BD%BD)
- [QQ è®¾è®¡èµ„æº](http://wiki.connect.qq.com/%E8%A7%86%E8%A7%89%E7%B4%A0%E6%9D%90%E4%B8%8B%E8%BD%BD)


å¾®ä¿¡ï¼š

- `com.tencent.mm.opensdk:wechat-sdk-android-without-mta:5.3.1`
- [åˆ†äº«ä¸æ”¶è—æ–‡æ¡£](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419317340&token=&lang=zh_CN)
- [å¾®ä¿¡ç™»å½•æ–‡æ¡£](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419317851&token=&lang=zh_CN)
- [å¾®ä¿¡SDK](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419319167&token=&lang=zh_CN)
- [å¾®ä¿¡è®¾è®¡èµ„æº](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419319171&token=&lang=zh_CN)
- [åˆ†äº«ä¸æ”¶è—æ–‡æ¡£](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419317340&token=&lang=zh_CN)
- [å¾®ä¿¡ç™»å½•æ–‡æ¡£](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419317851&token=&lang=zh_CN)
- [å…¬å‘Š-å–æ¶ˆ cancel äº‹ä»¶](https://open.weixin.qq.com/cgi-bin/announce?spm=a311a.9588098.0.0&action=getannouncement&key=11534138374cE6li&version=)


å¾®åšï¼š

- `com.sina.weibo.sdk:core:4.3.7:openDefaultRelease@aar`
- [å¾®åšå¼€æ”¾å¹³å°](http://open.weibo.com/wiki/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E4%BB%8B%E7%BB%8D)
- [GitHub(å¤§å¤šæ•°èµ„æºè¿˜æ˜¯åœ¨ git ä¸Š)](https://github.com/sinaweibosdk/weibo_android_sdk)
- [openApi æ–‡æ¡£](http://open.weibo.com/wiki/%E5%BE%AE%E5%8D%9AAPI)
- [å¾®åšè®¾è®¡èµ„æº](http://open.weibo.com/wiki/%E5%BE%AE%E5%8D%9A%E6%A0%87%E8%AF%86%E4%B8%8B%E8%BD%BD)


é’‰é’‰ï¼š

- `com.alibaba.android:ddsharesdk:1.1.0`
- [é’‰é’‰åˆ†äº«æ–‡æ¡£](https://open-doc.dingtalk.com/docs/doc.htm?spm=a219a.7629140.0.0.15nVTL&treeId=178&articleId=104986&docType=1)
- [é’‰é’‰è®¾è®¡èµ„æº](https://open-doc.dingtalk.com/microapp/kn6zg7/tnrhmb)


